$(document).ready(function(){function e(){this.navClicked=!1,this.homeOpen=!0;var e=$(".gallery_sections"),a=$(".gallery_images"),n=$(".gallery_nav_mask"),o=$(".gallery_nav"),t=$(".gallery_nav_icon"),s=$(".gallery_spinner"),i=a.find("img"),r=function(){var e=o.find("li"),a=0;return $(".gallery_nav_wrapper").find("li").each(function(){var e=$(this);a+=e.outerWidth()}),a},c=function(e){var a,n=this,o={},l=$(".gallery_images"),t=""+e;null!==o[t]?$.get(e).done(function(s){var i=$(s);a=i.find(".gallery_images div"),o[""+e]=a,$images=l.html("").append(o[t]).hide().find("img"),l.imagesLoaded().done(function(){TweenMax.set($images,{autoAlpha:0,yPercent:"50%"}),TweenMax.set(l,{display:"block"}),TweenMax.staggerTo($images,1,{autoAlpha:1,yPercent:"0%",force3D:!0,ease:Power4.easeOut,onComplete:function(){g()}},.1),h()}),l.lightGallery({controls:!0,thumbnail:!0,preload:4,cssEasing:"ease-in-out",speed:600}),n.navClicked===!1}).error(function(){alert("Error loading content")}):(l.html("").append(o[t]),n.navClicked===!1)},h=function(){TweenMax.to(e,1,{xPercent:"-100%",ease:Expo.easeOut}),TweenMax.to(a,1,{xPercent:"-100%",ease:Expo.easeOut})},d=function(){TweenMax.set(n,{autoAlpha:0,display:"block"}),setTimeout(function(){TweenMax.to(n,2,{autoAlpha:1})},600),TweenMax.set(o,{display:"block"}),$(".gallery_nav_wrapper").width(r()+100),p()},u=function(){TweenMax.to(e,1,{xPercent:"0%",ease:Expo.easeOut}),TweenMax.to(a,1,{xPercent:"-0%",ease:Expo.easeOut})},p=function(){function e(){0===Math.abs(scroll.x)&&(a.hasClass("hidden")||TweenMax.to(a,.6,{className:"+=hidden"})),Math.abs(scroll.x)===Math.abs(scroll.maxScrollX)&&(n.hasClass("hidden")||TweenMax.to(n,.6,{className:"+=hidden"})),Math.abs(scroll.x)>0&&Math.abs(scroll.x)<Math.abs(scroll.maxScrollX)&&a.hasClass("hidden")&&TweenMax.to(a,.6,{className:"-=hidden"}),Math.abs(scroll.x)<Math.abs(scroll.maxScrollX)&&n.hasClass("hidden")&&TweenMax.to(n,.6,{className:"-=hidden"})}window.scroll=new IScroll(".gallery_nav_mask",{scrollX:!0,scrollY:!1,mousewheel:!0,click:!0});var a=$(".nav-controls_left"),n=$(".nav-controls_right");scroll.on("scrollEnd",function(){e()}),a.on("click",function(){Math.abs(scroll.x)>0&&(scroll.scrollBy(l/5,0,1e3),e())}),n.on("click",function(){Math.abs(scroll.x)<Math.abs(scroll.maxScrollX)&&(scroll.scrollBy(-l/5,0,1e3),e())})},g=function(){var e=$(".spinner").remove();s.hasClass("show")&&TweenMax.to(s,.6,{className:"-=show"})},f=function(e,a){this.navClicked=a===!0?!0:!1;var n=$('<svg version="1.1" class="spinner" xmlns="http://www.w3.org/2000/svg"xmlns:xlink="http://www.w3.org/1999/xlink"x="0px"y="0px"viewBox="0 0 80 80"xml:space="preserve"> <path id="spinner"fill="#fff"d="M40,72C22.4,72,8,57.6,8,40C8,22.4, 22.4,8,40,8c17.6,0,32,14.4,32,32c0,1.1-0.9,2-2,2 s-2-0.9-2-2c0-15.4-12.6-28-28-28S12,24.6,12,40s12.6, 28,28,28c1.1,0,2,0.9,2,2S41.1,72,40,72z"> <animateTransform attributeType="xml"attributeName="transform"type="rotate"from="0 40 40"to="360 40 40"dur="0.6s"repeatCount="indefinite"/> </path> </svg>'),o=$(".spinner").remove();this.navClicked?s.html("").addClass("show").append(n):e.append(n)};return d(),{showSpinner:f,loadImages:c,goBack:u}}var a=$(".menu"),n=!1,o=function(){function e(){n.timeScale(1),n.play()}function a(){n.timeScale(3),n.reverse()}var n=new TimelineMax({yoyo:!0,paused:!0}),o=$(".nav_wrapper"),l=o.outerHeight(),t=o.find(".nav-list").find("li"),s=$(".header");return totalFromTop=s.height()+2*parseInt(s.css("margin-top")),TweenMax.set(o,{top:totalFromTop+"px"}),n.set(o,{autoAlpha:1,height:0,display:"block"}).set(t,{autoAlpha:0}).to(o,.5,{height:l,force3D:!0,ease:Expo.easeOut}).staggerFromTo(t,.8,{autoAlpha:0,yPercent:"100%",scale:1.025,force3D:!0},{autoAlpha:1,yPercent:"0%",force3D:!0,scale:1,ease:Back.easeOut},.2),{show:e,hide:a}}();a.on("click",function(){n===!1?o.show():o.hide(),n=!n});var l=$("body").width(),t=function(){var e,a=location.hash?location.hash.slice(1):"";if(a.length>0&&(e=$("#"+a)).length>0){var n=e.offset().top;console.log(n),TweenMax.to(window,2,{scrollTo:{y:n+2},ease:Expo.easeOut})}},s=$(".pageNav_item");s.on("click",function(e){var a=$(this);location.hash=a.attr("href"),t(),e.preventDefault()}),window.addEventListener("hashchange",t);var i=$(".btt");i.on("click",function(){TweenMax.to(window,2,{scrollTo:{y:0},force3D:!0,ease:Expo.easeOut})}),galleryNavIcon=$(".gallery_nav_icon"),galleryNavIcon.on("click",function(){c.goBack()});var r=$(".gallery_sections").find(".item"),c=r.length>0?new e:"",h=$(".gallery_nav").find("li");r.each(function(){var e=$(this);e.on("click",function(){var e=$(this),a=e.index(),n=h.eq(a+1);c.showSpinner(e,!1),c.loadImages(e.data("href")),h.removeClass("active"),n.addClass("active"),scroll.scrollToElement(h[a]),console.log(a)})}),h.on("click",function(e){var a=$(this),n=a.find("a").attr("href"),o=$(".gallery_images");a.hasClass("gallery_nav_icon")||(h.removeClass("active"),a.addClass("active"),c.showSpinner(a,!0),c.loadImages(n)),e.preventDefault()}),singleGalleryPage=$(".gallery_shift"),singleGalleryPage.length>0&&(TweenMax.to(".gallery_sections",1,{xPercent:"-100%",ease:Expo.easeOut}),TweenMax.to(".gallery_images",1,{xPercent:"-100%",ease:Expo.easeOut}));var d=$(".contactForm");d.on("submit",function(e){var a=$(this).attr("action"),n=$(this).serialize();$.ajax({url:a,method:"post",data:n}).done(function(e){console.log(e)}),e.preventDefault()})});